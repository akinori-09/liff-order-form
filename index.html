<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>職員室 注文フォーム</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h2>飲み物・お菓子 注文フォーム</h2>

  <label>ユーザー名：
    <input type="text" id="name" />
  </label>

  <label>職員室：
    <select id="room">
      <option value="生徒指導室">生徒指導室</option>
      <option value="職員室">職員室</option>
      <option value="事務室">事務室</option>
      <option value="商業センター">商業センター</option>
      <option value="進路指導室">進路指導室</option>
    </select>
  </label>

  <label>商品名：
    <select id="item">
      <option value="お茶">お茶</option>
      <option value="コーヒー">コーヒー</option>
      <option value="クッキー">クッキー</option>
    </select>
  </label>

  <label>数量：
    <input type="number" id="quantity" value="1" min="1" />
  </label>

  <button onclick="submitOrder()">注文する</button>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
async function submitOrder() {
  const button = document.getElementById("orderButton");
  button.disabled = true; // ボタンを押せなくする
  button.innerText = "送信中...";

  try {
    // ここにfetchとかの処理
    const name = document.getElementById('name').value;
    const room = document.getElementById('room').value;
    const item = document.getElementById('item').value;
    const quantity = parseInt(document.getElementById('quantity').value, 10);


      const data = { name, room, item, quantity };

      const response = await fetch("https://script.google.com/a/macros/ict.shimanet.ed.jp/s/AKfycbz1X4NTANm-7F0itoZ9kbsD8dU1RrHH43R_tcyNBjwqmVD9PGaOfQ87UeK6ftegkezg/exec", {
        method: "POST",
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
      });

      if (response.ok) {
        alert("注文を受け付けました！");
      } else {
        alert("注文に失敗しました。もう一度お試しください。");
      }
    }

    liff.init({ liffId: "2007745047-qKgo8ENl" }).catch(console.error);
  </script>
</body>
</html>
